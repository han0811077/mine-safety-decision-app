import streamlit as st

st.set_page_config(page_title="çŸ¿äº•çªæ°´åº”æ€¥å¤„ç½®å†³ç­–ç³»ç»Ÿ", page_icon="â›‘ï¸", layout="centered")
st.title("â›‘ï¸ çŸ¿äº•çªæ°´åº”æ€¥å¤„ç½®å†³ç­–æ”¯æŒç³»ç»Ÿ")
st.markdown("**è¯·æ ¹æ®ç°åœºå®é™…æƒ…å†µï¼Œä¾æ¬¡å›ç­”ä¸‹åˆ—é—®é¢˜ã€‚ç³»ç»Ÿå°†ç»™å‡ºåº”æ€¥å¤„ç½®å»ºè®®ã€‚**")

# åˆå§‹åŒ–session_state
if 'step' not in st.session_state:
    st.session_state.step = 1
if 'decision_made' not in st.session_state:
    st.session_state.decision_made = False

def reset_form():
    st.session_state.step = 1
    st.session_state.decision_made = False

# é—®é¢˜ä¸å†³ç­–é€»è¾‘
if not st.session_state.decision_made:
    if st.session_state.step == 1:
        st.subheader("ç¬¬ä¸€æ­¥ï¼šåˆæ­¥æŠ¥å‘Š")
        alarm = st.radio("æ˜¯å¦å·²ç«‹å³å‘å‡ºè­¦æŠ¥å¹¶å‘è°ƒåº¦å®¤æŠ¥å‘Šï¼Ÿ", ("æ˜¯", "å¦"), key="step1")
        if alarm == "æ˜¯":
            st.session_state.step = 2
            st.rerun()
        else:
            st.error("âŒ **é¦–è¦è¡ŒåŠ¨ï¼šè¯·ç«‹å³å‘å‡ºè­¦æŠ¥å¹¶æŠ¥å‘Šè°ƒåº¦å®¤ï¼** è¿™æ˜¯æ‰€æœ‰åº”æ€¥å¤„ç½®çš„ç¬¬ä¸€æ­¥ã€‚")
            
    elif st.session_state.step == 2:
        st.subheader("ç¬¬äºŒæ­¥ï¼šé™©æƒ…è¯„ä¼°")
        urgency = st.radio("çªæ°´å¾å…†æ˜¯å¦æ­£åœ¨æ€¥å‰§å˜åŒ–ï¼Ÿï¼ˆä¾‹å¦‚ï¼šæ°´é‡çŒ›å¢ã€å··é“é¡¶æ¿/åº•æ¿å˜å½¢åŠ é€Ÿã€é—»åˆ°è‡­é¸¡è›‹å‘³ç­‰ï¼‰", ("æ˜¯", "å¦"), key="step2")
        if urgency == "æ˜¯":
            st.session_state.final_decision = "ğŸš¨ **ã€ç´§æ€¥å†³ç­–ï¼šç«‹å³æ’¤ç¦»ã€‘** ğŸš¨\n\n**è¡ŒåŠ¨å»ºè®®ï¼š**\n1. ç«‹å³åœæ­¢æ‰€æœ‰ä½œä¸šã€‚\n2. æ²¿é¢„å…ˆç¡®å®šçš„é¿ç¾è·¯çº¿ï¼Œç»„ç»‡æ‰€æœ‰äººå‘˜è¿…é€Ÿæ’¤ç¦»ã€‚\n3. æ’¤ç¦»æ—¶æ³¨æ„ç›¸äº’ç…§åº”ï¼Œå‘ŠçŸ¥å¯èƒ½å—å¨èƒåŒºåŸŸçš„äººå‘˜ã€‚\n4. éšæ—¶å‘è°ƒåº¦å®¤æŠ¥å‘Šä½ç½®å’Œæƒ…å†µã€‚\n\n**åŸåˆ™ï¼šç”Ÿå‘½è‡³ä¸Šï¼Œæ— éœ€çŠ¹è±«ã€‚**"
            st.session_state.decision_made = True
        else:
            st.session_state.step = 3
            st.rerun()

    elif st.session_state.step == 3:
        st.subheader("ç¬¬ä¸‰æ­¥ï¼šæ°´æºä¸ä½ç½®åˆ¤æ–­")
        high_risk = st.radio("æ°´æºæ˜¯å¦ç–‘ä¼¼ä¸ºè€ç©ºæ°´ï¼Œæˆ–è€…ä½œä¸šäººå‘˜æ˜¯å¦ä½äºé€æ°´å±é™©åŒºåŸŸçš„ä¸‹æ–¹ï¼Ÿ", ("æ˜¯", "å¦"), key="step3")
        if high_risk == "æ˜¯":
            st.session_state.final_decision = "âš ï¸ **ã€é«˜é£é™©å†³ç­–ï¼šé¢„é˜²æ€§æ’¤ç¦»ã€‘** âš ï¸\n\n**è¡ŒåŠ¨å»ºè®®ï¼š**\n1. ç«‹å³åœæ­¢ä½œä¸šï¼Œåˆ‡æ–­å·¥ä½œé¢ç”µæºã€‚\n2. æ‰€æœ‰äººå‘˜ç«‹å³æ’¤ç¦»è‡³å®‰å…¨åŒºåŸŸã€‚\n3. è€ç©ºæ°´å¯èƒ½ä¼´æœ‰ç¡«åŒ–æ°¢ç­‰æœ‰å®³æ°”ä½“ï¼Œé£é™©æé«˜ã€‚\n4. ç­‰å¾…è¿›ä¸€æ­¥å‹˜æŸ¥å’ŒæŒ‡ä»¤ã€‚"
            st.session_state.decision_made = True
        else:
            st.session_state.step = 4
            st.rerun()

    elif st.session_state.step == 4:
        st.subheader("ç¬¬å››æ­¥ï¼šåº”æ€¥èƒ½åŠ›è¯„ä¼°")
        capable = st.radio("ç°åœºæ˜¯å¦æœ‰ç»éªŒã€æœ‰ææ–™ã€æœ‰è®¾å¤‡ï¼Œä¸”åœ¨æ°´æƒ…ç¨³å®šã€ç¡®ä¿å®‰å…¨çš„å‰æä¸‹ï¼Œèƒ½å¤Ÿè¿›è¡Œæœ‰æ•ˆçš„ä¸´æ—¶åŠ å›ºæˆ–å¯¼æ°´ä½œä¸šï¼Ÿ", ("æ˜¯", "å¦"), key="step4")
        if capable == "æ˜¯":
            st.session_state.final_decision = "ğŸ› ï¸ **ã€å†³ç­–ï¼šå¯æ§åº”æ€¥å¤„ç½®ã€‘** ğŸ› ï¸\n\n**è¡ŒåŠ¨å»ºè®®ï¼š**\n1. åœ¨è·Ÿç­é˜Ÿé•¿æˆ–æŠ€æœ¯äººå‘˜çš„æŒ‡æŒ¥ä¸‹è¿›è¡Œã€‚\n2. å®‰æ’ä¸“äººè§‚æµ‹æ°´æƒ…å’Œé¡¶æ¿æƒ…å†µã€‚\n3. é‡‡å–æ‰“è®¾ç‚¹æŸ±ã€æ„ç­‘é˜²æ°´é—¸å¢™ç­‰æªæ–½ã€‚\n4. ä¸€æ—¦æƒ…å†µæ¶åŒ–ï¼Œç«‹å³åœæ­¢ä½œä¸šå¹¶æ’¤ç¦»ã€‚"
            st.session_state.decision_made = True
        else:
            st.session_state.final_decision = "ğŸŸ¡ **ã€å†³ç­–ï¼šè­¦æˆ’å¾…æ´ã€‘** ğŸŸ¡\n\n**è¡ŒåŠ¨å»ºè®®ï¼š**\n1. ç«‹å³åœæ­¢ä½œä¸šï¼Œäººå‘˜æ’¤è‡³å®‰å…¨åœ°ç‚¹ã€‚\n2. åœ¨å±é™©åŒºåŸŸè®¾ç½®æ˜æ˜¾çš„è­¦æˆ’çº¿å’Œè­¦ç¤ºç‰Œã€‚\n3. æŒç»­ç›‘æµ‹æ°´æƒ…å˜åŒ–ã€‚\n4. ç­‰å¾…ä¸“ä¸šæ•‘æŠ¤é˜Ÿå’ŒæŒ‡æŒ¥éƒ¨è¿›ä¸€æ­¥çš„å‹˜æŸ¥ä¸æŒ‡ä»¤ã€‚**ä¸¥ç¦ç›²ç›®æ–½æ•‘ï¼**"
            st.session_state.decision_made = True

# æ˜¾ç¤ºæœ€ç»ˆå†³ç­–
if st.session_state.decision_made:
    st.success(st.session_state.final_decision)
    st.button("é‡æ–°å¼€å§‹å†³ç­–æ¨¡æ‹Ÿ", on_click=reset_form)

# ä¾§è¾¹æ ä¿¡æ¯
with st.sidebar:
    st.header("åº”æ€¥å¤„ç½®åŸåˆ™")
    st.markdown("""
    - **å®‰å…¨ç¬¬ä¸€**ï¼šç”Ÿå‘½é«˜äºä¸€åˆ‡ã€‚
    - **åŠæ—¶æŠ¥å‘Š**ï¼šä»»ä½•å¾å…†éƒ½å¿…é¡»ç«‹å³ä¸ŠæŠ¥ã€‚
    - **å…ˆæ’¤äººåå¤„ç½®**ï¼šåœ¨æƒ…å†µä¸æ˜æˆ–é£é™©è¾ƒé«˜æ—¶ï¼Œä¼˜å…ˆä¿è¯äººå‘˜å®‰å…¨ã€‚
    - **ç§‘å­¦æ–½æ•‘**ï¼šæœç»ç›²ç›®è¡ŒåŠ¨ã€‚
    """)
    st.header("å¸¸è§çªæ°´å¾å…†")
    st.markdown("""
    - å··é“å£"æŒ‚æ±—"ã€æ¸—æ°´
    - æ·‹æ°´åŠ å¤§ï¼Œå¦‚"ä¸‹é›¨"
    - æ°´å«å£°ã€æ°´å¼å£°
    - é¡¶æ¿æ¥å‹ã€åº•æ¿é¼“èµ·
    - æ°´è‰²å‘æµ‘ã€æœ‰å¼‚å‘³
    - å·¥ä½œé¢æ¸©åº¦ä¸‹é™
    """)